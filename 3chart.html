<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>中国古代青铜器纹样可视化大屏</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"></script>
    <style>
        body { margin:0; background:#f5efe0; }
        .grid { 
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            padding: 20px;
        }
        .chart { 
            background: rgba(255,255,255,0.9); 
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 15px;
        }
        h2 { 
            color: #6b5843;
            border-left: 4px solid #b89f7e;
            padding-left: 10px;
        }
    </style>
</head>
<body>
    <div class="grid">
        <!-- 桑基图模块 -->
        <div class="chart" style="height:800px">
            <h2>商周纹样演变关系图</h2>
            <div id="sankey" style="height:90%"></div>
        </div>

        <!-- 时间轴模块 -->
        <div class="chart" style="height:800px">
            <h2>纹样兴衰时间轴 (前1600-前771)</h2>
            <div id="timeline" style="height:90%"></div>
        </div>

        <!-- 分类树图模块 -->
        <div class="chart" style="height:600px">
            <h2>青铜器纹样分类体系</h2>
            <div id="treemap" style="height:90%"></div>
        </div>

        <!-- 地理分布模块 -->
        <div class="chart" style="height:600px">
            <h2>典型纹样出土地分布</h2>
            <div id="map" style="height:90%"></div>
        </div>
    </div>


    <script type="text/javascript">
        // 初始化图表
        var myChart = echarts.init(document.getElementById('main'));

        // 桑基图数据配置
        var option = {
            title: {
                text: '中国古代青铜器纹样演变桑基图',
                subtext: '数据来源：考古文献与博物馆资料',
                left: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: '{b}'
            },
            series: [{
                type: 'sankey',
                layout: 'none',
                emphasis: {
                    focus: 'adjacency'
                },
                data: [
                    // 时期节点 (层级1)
                    {name: '商代早期'},
                    {name: '商代晚期'},
                    {name: '西周早期'},
                    {name: '西周晚期'},
                    {name: '其他时期'},
                    
                    // 纹样类型 (层级2)
                    {name: '动物纹', itemStyle: {color: '#8c564b'}},
                    {name: '几何纹', itemStyle: {color: '#17becf'}},
                    {name: '自然纹', itemStyle: {color: '#2ca02c'}},
                    {name: '人物纹', itemStyle: {color: '#d62728'}},
                    
                    // 具体纹样 (层级3)
                    {name: '饕餮纹', itemStyle: {color: '#bcbd22'}},
                    {name: '夔龙纹', itemStyle: {color: '#9467bd'}},
                    {name: '凤鸟纹', itemStyle: {color: '#e377c2'}},
                    {name: '云雷纹', itemStyle: {color: '#7f7f7f'}},
                    {name: '窃曲纹', itemStyle: {color: '#ff9896'}},
                    {name: '重环纹', itemStyle: {color: '#98df8a'}},
                    {name: '火纹', itemStyle: {color: '#ff7f0e'}},
                    {name: '虎噬人纹', itemStyle: {color: '#1f77b4'}},
                    {name: '狩猎纹', itemStyle: {color: '#aec7e8'}}
                ],
                links: [
                    // 时期 -> 纹样类型
                    {source: '商代早期', target: '动物纹', value: 8},
                    {source: '商代早期', target: '几何纹', value: 3},
                    {source: '商代晚期', target: '动物纹', value: 12},
                    {source: '商代晚期', target: '自然纹', value: 6},
                    {source: '西周早期', target: '动物纹', value: 7},
                    {source: '西周早期', target: '几何纹', value: 9},
                    {source: '西周晚期', target: '几何纹', value: 11},
                    {source: '西周晚期', target: '人物纹', value: 5},
                    {source: '其他时期', target: '人物纹', value: 4},
                    
                    // 纹样类型 -> 具体纹样
                    {source: '动物纹', target: '饕餮纹', value: 15},
                    {source: '动物纹', target: '夔龙纹', value: 10},
                    {source: '动物纹', target: '凤鸟纹', value: 8},
                    {source: '几何纹', target: '云雷纹', value: 12},
                    {source: '几何纹', target: '窃曲纹', value: 9},
                    {source: '几何纹', target: '重环纹', value: 7},
                    {source: '自然纹', target: '火纹', value: 6},
                    {source: '人物纹', target: '虎噬人纹', value: 5},
                    {source: '人物纹', target: '狩猎纹', value: 4}
                ],
                lineStyle: {
                    color: 'gradient',
                    curveness: 0.3
                },
                label: {
                    color: '#333',
                    fontSize: 12,
                    position: 'right'
                }
            }],
            visualMap: {
                type: 'piecewise',
                categories: ['商代早期', '商代晚期', '西周早期', '西周晚期', '其他时期'],
                dimension: 0,
                inRange: {
                    color: ['#c23531', '#2f4554', '#61a0a8', '#d48265', '#91c7ae']
                },
                top: 20,
                right: 20
            }
        };

        myChart.setOption(option);
    </script>

<!-- 时间轴配置（数据基于分期研究:cite[3]:cite[7]）-->
    <script>
        // 考古数据（来源：中国青铜器综论、殷周金文集成）
        const data = [
            {
                period: "商代早期\n(约前1600-前1300)",
                timeline: "-1600",
                motifs: [
                    {name: "简化兽面纹", ratio: 30, example: "杜岭方鼎", img: "https://example.com/du-ling.jpg"},
                    {name: "目雷纹", ratio: 25, example: "二里头爵", img: "https://example.com/erlitou.jpg"},
                    {name: "连珠纹", ratio: 20, example: "郑州青铜斝", img: "https://example.com/zhengzhou.jpg"}
                ],
                event: "二里岗文化兴起"
            },
            {
                period: "商代晚期\n(约前1300-前1046)",
                timeline: "-1250",
                motifs: [
                    {name: "饕餮纹", ratio: 70, example: "司母戊鼎", img: "https://example.com/simuwu.jpg"},
                    {name: "夔龙纹", ratio: 50, example: "妇好鸮尊", img: "https://example.com/fuhao.jpg"},
                    {name: "云雷纹", ratio: 65, example: "四羊方尊", img: "https://example.com/siyang.jpg"}
                ],
                event: "殷墟文化鼎盛"
            },
            {
                period: "西周早期\n(约前1046-前900)",
                timeline: "-1000",
                motifs: [
                    {name: "凤鸟纹", ratio: 50, example: "何尊", img: "https://example.com/he-zun.jpg"},
                    {name: "顾龙纹", ratio: 35, example: "大盂鼎", img: "https://example.com/dayu.jpg"},
                    {name: "波带纹", ratio: 20, example: "利簋", img: "https://example.com/li-gui.jpg"}
                ],
                event: "周公分封制"
            },
            {
                period: "西周晚期\n(约前900-前771)",
                timeline: "-800",
                motifs: [
                    {name: "窃曲纹", ratio: 60, example: "毛公鼎", img: "https://example.com/maogong.jpg"},
                    {name: "重环纹", ratio: 45, example: "虢季子白盘", img: "https://example.com/guoji.jpg"},
                    {name: "鳞纹", ratio: 30, example: "颂壶", img: "https://example.com/song-hu.jpg"}
                ],
                event: "礼乐制度成熟"
            }
        ];
        
        const option = {
            title: {
                text: '商周青铜器主流纹样兴衰史（前1600-前771）',
                subtext: '数据来源：中国社会科学院考古研究所',
                left: 'center'
            },
            tooltip: {
                formatter: function(params) {
                    const d = data[params.dataIndex];
                    let html = `<strong>${d.period}</strong><br>${d.event}`;
                    html += `<div style="border-top:1px solid #ccc;margin:5px 0;"></div>`;
                    d.motifs.forEach(m => {
                        html += `
                        <div style="margin:8px 0;">
                            <span style="display:inline-block;width:100px;">${m.name}</span>
                            <span style="color:#8c564b">${m.ratio}%器物使用</span>
                            <br><em>典型器物：${m.example}</em>
                        </div>`;
                    });
                    if(d.motifs[0]?.img) {
                        html += `<img src="${d.motifs[0].img}" class="tooltip-img">`;
                    }
                    return html;
                }
            },
            xAxis: {
                type: 'time',
                axisLabel: { formatter: function(val) { return Math.abs(val) + ' BC'; } },
                splitLine: { show: false }
            },
            yAxis: { show: false },
            series: [{
                type: 'line',
                symbolSize: 20,
                data: data.map(d => ({
                    name: d.period,
                    value: [d.timeline, 0],
                    itemStyle: {
                        color: getPeriodColor(d.period),
                        shadowBlur: 10,
                        shadowColor: 'rgba(0,0,0,0.3)'
                    }
                })),
                lineStyle: { width: 0 }, // 隐藏连接线
                label: {
                    show: true,
                    position: 'bottom',
                    formatter: '{b}',
                    fontSize: 14,
                    color: '#6b5843',
                    rich: { 
                        period: { fontSize: 16, color: '#b89f7e', padding: [5,0] },
                        event: { fontSize: 12, color: '#666' }
                    }
                }
            }],
            visualMap: {
                type: 'piecewise',
                pieces: [
                    { min: -1600, max: -1300, label: '商代早期', color: '#b89f7e' },
                    { min: -1300, max: -1046, label: '商代晚期', color: '#8c564b' },
                    { min: -1046, max: -900, label: '西周早期', color: '#d4af37' },
                    { min: -900, max: -771, label: '西周晚期', color: '#2ca02c' }
                ],
                left: '5%',
                top: '15%'
            }
        };
        
        // 获取时期颜色
        function getPeriodColor(period) {
            const colors = {
                '商代早期': '#b89f7e',
                '商代晚期': '#8c564b',
                '西周早期': '#d4af37',
                '西周晚期': '#2ca02c'
            };
            return colors[period.split('\n')[0]];
        }
        
        // 初始化图表
        const chart = echarts.init(document.getElementById('main'));
        chart.setOption(option);
        
        // 响应式适配
        window.addEventListener('resize', () => chart.resize());
    </script>
<!--分类树图配置（基于青铜器分类体系:cite[7]:cite[8]）-->
    <script>
        // 考古分类数据（来源：中国青铜器全集）
        const data = {
            name: "青铜器纹样体系",
            children: [
                {
                    name: "动物纹系 (62%)",
                    value: 620,
                    itemStyle: { color: '#8c564b' },
                    children: [
                        {
                            name: "兽面类",
                            value: 400,
                            children: [
                                {name: "饕餮纹(商晚)", value: 280, example: "司母戊鼎", period: "商晚-西周早"},
                                {name: "龙首纹", value: 120, example: "龙虎尊", period: "商早-商晚"}
                            ]
                        },
                        {
                            name: "龙凤类",
                            value: 220,
                            children: [
                                {name: "夔龙纹(商)", value: 150, example: "妇好鸮尊", period: "商早-西周早"},
                                {name: "凤鸟纹(周)", value: 70, example: "何尊", period: "西周早-西周晚"}
                            ]
                        }
                    ]
                },
                {
                    name: "几何纹系 (28%)",
                    value: 280,
                    itemStyle: { color: '#17becf' },
                    children: [
                        {
                            name: "云雷类",
                            value: 150,
                            children: [
                                {name: "勾连云雷纹", value: 90, example: "四羊方尊", period: "商晚"},
                                {name: "目雷纹", value: 60, example: "杜岭方鼎", period: "商早"}
                            ]
                        },
                        {
                            name: "环带类",
                            value: 130,
                            children: [
                                {name: "重环纹(周晚)", value: 80, example: "毛公鼎", period: "西周晚"},
                                {name: "波曲纹", value: 50, example: "颂壶", period: "西周晚"}
                            ]
                        }
                    ]
                },
                {
                    name: "人物纹系 (7%)",
                    value: 70,
                    itemStyle: { color: '#d62728' },
                    children: [
                        {name: "人面纹", value: 30, example: "人面钺", period: "商早"},
                        {name: "狩猎纹", value: 40, example: "刖人守门鬲", period: "西周晚"}
                    ]
                },
                {
                    name: "自然纹系 (3%)",
                    value: 30,
                    itemStyle: { color: '#2ca02c' },
                    children: [
                        {name: "火纹", value: 20, example: "伯矩鬲", period: "西周早"},
                        {name: "水波纹", value: 10, example: "蟠龙盘", period: "商晚"}
                    ]
                }
            ]
        };
        
        const option = {
            title: {
                text: '商周青铜器纹样分类体系',
                subtext: '基于1000件标准器物的类型学统计',
                left: 'center'
            },
            tooltip: {
                formatter: function(info) {
                    const node = info.data;
                    let html = `<div class="tooltip-box">`;
                    if(node.children) {
                        html += `<strong>${node.name}</strong><br>`;
                        html += `占比：${(node.value/10).toFixed(1)}%`;
                    } else {
                        html += `<strong style="color:${info.color}">■</strong> ${node.name}<br>`;
                        html += `典型器物：${node.example}<br>`;
                        html += `盛行时期：${node.period}`;
                    }
                    html += `</div>`;
                    return html;
                }
            },
            series: [{
                type: 'treemap',
                levels: [
                    {   
                        // 第一层级：大类
                        itemStyle: { borderWidth: 3, gapWidth: 10 },
                        label: { fontSize: 18, color: '#6b5843' }
                    },
                    {   
                        // 第二层级：亚类
                        itemStyle: { borderWidth: 2, gapWidth: 5 },
                        label: { fontSize: 14 }
                    },
                    {   
                        // 第三层级：具体纹样
                        itemStyle: { borderWidth: 1 },
                        label: { fontSize: 12, show: true }
                    }
                ],
                data: [data],
                roam: false,
                nodeClick: false,
                breadcrumb: { show: false }
            }],
            visualMap: {
                type: 'piecewise',
                pieces: [
                    { min: 100, label: '高频纹样', color: '#8c564b' },
                    { min: 50, max: 99, label: '中频纹样', color: '#d4af37' },
                    { max: 49, label: '低频纹样', color: '#2f4554' }
                ],
                left: 'right',
                orient: 'vertical'
            }
        };
        
        // 初始化图表
        const chart = echarts.init(document.getElementById('main'));
        chart.setOption(option);
        
        // 响应式适配
        window.addEventListener('resize', () => chart.resize());
    </script>

<script>
    // 考古数据（来源：中国考古地图集）
    const data = [
        // 商代早期（前1600-前1300）
        {
            name: "郑州商城",
            coord: [113.665, 34.757],
            period: "商代早期",
            motifs: ["简化兽面纹", "目雷纹"],
            artifacts: ["杜岭方鼎", "兽面纹斝"],
            img: "https://example.com/zhengzhou.jpg",
            value: 35
        },
        // 商代晚期（前1300-前1046）
        {
            name: "殷墟",
            coord: [114.392, 36.097],
            period: "商代晚期",
            motifs: ["饕餮纹", "夔龙纹", "虎噬人纹"],
            artifacts: ["司母戊鼎", "妇好鸮尊"],
            img: "https://example.com/yinxu.jpg",
            value: 90
        },
        // 西周早期（前1046-前900）
        {
            name: "周原遗址",
            coord: [107.823, 34.342],
            period: "西周早期",
            motifs: ["凤鸟纹", "顾龙纹"],
            artifacts: ["何尊", "大盂鼎"],
            img: "https://example.com/zhouyuan.jpg",
            value: 60
        },
        // 西周晚期（前900-前771）
        {
            name: "三门峡虢国墓地",
            coord: [111.194, 34.772],
            period: "西周晚期",
            motifs: ["窃曲纹", "重环纹"],
            artifacts: ["虢季子白盘", "虢仲盨"],
            img: "https://example.com/guo-tomb.jpg",
            value: 45
        },
        // 其他时期
        {
            name: "琉璃河遗址",
            coord: [116.015, 39.618],
            period: "西周早期",
            motifs: ["夔龙纹", "蝉纹"],
            artifacts: ["堇鼎", "伯矩鬲"],
            img: "https://example.com/liulihe.jpg",
            value: 30
        }
    ];
    
    const option = {
        title: {
            text: '商周青铜器典型纹样出土地分布',
            subtext: '数据来源：全国文物普查资料',
            left: 'center'
        },
        tooltip: {
            formatter: function(params) {
                const d = params.data;
                let html = `<div style="max-width:400px;">
                    <strong style="color:${params.color}">■</strong> ${d.name}<br>
                    <em>${d.period}</em><hr style="margin:5px 0;border-color:#eee">
                    <strong>主要纹样：</strong>${d.motifs.join("、")}<br>
                    <strong>典型器物：</strong>${d.artifacts.join("、")}`;
                if(d.img) html += `<img src="${d.img}" class="tooltip-img">`;
                return html + '</div>';
            }
        },
        geo: {
            map: 'china',
            roam: true,
            zoom: 1.5,
            center: [108.0, 34.0],
            itemStyle: {
                areaColor: '#f5efe0',
                borderColor: '#6b5843',
                borderWidth: 1
            },
            emphasis: {
                label: { show: false },
                itemStyle: { areaColor: '#e6d7c4' }
            }
        },
        series: [{
            type: 'effectScatter',
            coordinateSystem: 'geo',
            symbolSize: function(val) { return Math.sqrt(val[2])*4; },
            rippleEffect: { brushType: 'stroke', scale: 4 },
            itemStyle: { color: '#8c564b' },
            data: data.map(d => ({
                name: d.name,
                value: [...d.coord, d.value],
                itemStyle: { color: getPeriodColor(d.period) },
                period: d.period
            }))
        }],
        visualMap: {
            type: 'piecewise',
            pieces: [
                { label: '商代早期', color: '#b89f7e' },
                { label: '商代晚期', color: '#8c564b' },
                { label: '西周早期', color: '#d4af37' },
                { label: '西周晚期', color: '#2ca02c' },
                { label: '其他时期', color: '#7f7f7f' }
            ],
            left: 'right',
            orient: 'vertical',
            textStyle: { color: '#6b5843' }
        }
    };
    
    // 获取时期颜色
    function getPeriodColor(period) {
        const colors = {
            '商代早期': '#b89f7e',
            '商代晚期': '#8c564b',
            '西周早期': '#d4af37',
            '西周晚期': '#2ca02c',
            '其他时期': '#7f7f7f'
        };
        return colors[period];
    }
    
    // 初始化图表
    const chart = echarts.init(document.getElementById('main'));
    chart.setOption(option);
    
    // 响应式适配
    window.addEventListener('resize', () => chart.resize());
    </script>
</body>
</html>